<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Audit Management System</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon-32x32.png') }}" type="image/png"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            overflow: hidden;
            background-color: #f5f5f5;
        }

        .login-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .login-left {
            width: 35%;
            background-color: #2c2c2c;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4vh 40px; 
            color: #fff;
            position: relative;
            box-shadow: 10px 0 30px rgba(0,0,0,0.2);
            z-index: 10;
            overflow-y: auto; 
            height: 100vh;
        }

        .login-left::-webkit-scrollbar { width: 6px; }
        .login-left::-webkit-scrollbar-track { background: #2c2c2c; }
        .login-left::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .login-left::-webkit-scrollbar-thumb:hover { background: #FFC107; }

        .login-right {
            width: 65%;
            background-image: url("{{ url_for('static', filename='6e4e7b60-a9c1-4069-a82f-8bc252b8ed0c.webp') }}"); 
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .login-right::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(20, 20, 20, 0.4) 100%);
        }

        .building-outline {
            position: absolute;
            bottom: 0;
            right: 50px;
            width: 70%;
            height: 80%;
            background-image: url("{{ url_for('static', filename='building_outline.png') }}");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom right;
            opacity: 0.9;
            z-index: 1;
        }
        .brand-header {
            margin-bottom: 4vh; 
            display: flex;
            align-items: center;
            gap: 20px; 
            width: 100%;
            max-width: 500px; 
            justify-content: center;
        }

        .login-logo {
            height: clamp(60px, 8vh, 90px); 
            width: auto;
            text-align: center;
        }
        
        .brand-text {
            border-left: 4px solid #666; 
            padding-left: 20px; 
            min-height: clamp(60px, 8vh, 85px); 
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
        }

        .brand-title {
            font-size: clamp(2.5rem, 4vw, 3.5rem); 
            font-weight: 800;
            color: #FFC107;
            line-height: 0.9; 
            letter-spacing: 1px;
        }
        
        .brand-subtitle {
            font-size: clamp(0.9rem, 1vw, 1.1rem); 
            color: #ddd;
            margin-top: 5px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .login-form-wrapper {
            width: 100%;
            max-width: 450px; 
            margin: auto 0; 
        }

        .welcome-text {
            margin-bottom: 3vh;
            text-align: center;
        }

        .welcome-text h2 {
            font-size: clamp(1.5rem, 2.5vw, 2rem); 
            font-weight: 700;
            margin-bottom: 5px;
            color: #fff;
        }

        .welcome-text p {
            font-size: 0.95rem;
            color: #bbb;
            line-height: 1.4;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            width: 100%;
            padding: 15px 20px; 
            background-color: #444;
            border: 1px solid #555;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem; 
            outline: none;
            transition: all 0.3s;
        }

        .form-control::placeholder { color: #888; }

        .form-control:focus {
            background-color: #505050;
            border-color: #FFC107;
            box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 14px; 
            background-color: #FFC107;
            color: #333;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(255, 193, 7, 0.2);
            text-transform: uppercase;
        }

        .login-btn:hover {
            background-color: #ffca28;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 193, 7, 0.3);
        }
        
        .action-links {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.85rem;
        }

        .action-links a {
            color: #aaa;
            text-decoration: none;
            transition: color 0.2s;
            cursor: pointer;
        }

        .action-links a:hover {
            color: #FFC107;
            text-decoration: underline;
        }
        
        .create-account-link {
            font-weight: 600;
            color: #FFC107 !important;
        }

        .info-box {
            margin-top: 3vh;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #FFC107;
            font-size: 0.85rem;
            color: #ccc;
            line-height: 1.5;
        }
        
        .info-box strong { color: #FFC107; font-size: 0.9rem; }
        .info-box a { color: #FFC107; text-decoration: none; font-weight: 600; }

        .footer-links {
            margin-top: 4vh;
            padding-bottom: 2vh;
            font-size: 0.8rem;
            color: #888;
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 450px;
            justify-content: center;
        }
        
        .footer-links a {
            color: #FFC107; 
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .footer-links a:hover { color: #fff; }
        .footer-separator { color: #666; }

        .hero-text {
            position: absolute;
            bottom: 60px;
            right: 60px;
            text-align: right;
            color: white;
            z-index: 2;
        }
        
        .hero-text h3 {
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            margin-bottom: 5px;
        }

        .hero-text p {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }

        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); z-index: 2000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        
        .cookie-modal, .register-modal {
            background: #2c2c2c; 
            color: #fff;
            padding: 35px;
            border-radius: 12px;
            width: 600px;
            max-width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid #444;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            position: relative;
        }

        .register-modal {
            width: 500px; 
            max-height: 90vh; 
            overflow-y: auto; 
        }
        
        .register-modal::-webkit-scrollbar { width: 6px; }
        .register-modal::-webkit-scrollbar-track { background: #2c2c2c; }
        .register-modal::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .register-modal::-webkit-scrollbar-thumb:hover { background: #FFC107; }

        .modal-overlay.active .cookie-modal, 
        .modal-overlay.active .register-modal { transform: translateY(0); }
        
        .cookie-header, .register-header { 
            display: flex; align-items: center; gap: 10px; margin-bottom: 20px; 
            border-bottom: 1px solid #444; padding-bottom: 15px; text-align: center; justify-content: center;
        }
        .cookie-header h3, .register-header h3 { font-size: 1.4rem; color: #FFC107; font-weight: 700; margin: 0; }
        
        .cookie-content p { font-size: 0.95rem; line-height: 1.6; color: #ccc; margin-bottom: 15px; text-align: justify; }
        .cookie-content strong { color: #fff; }
        
        .cookie-close { position: absolute; top: 20px; right: 20px; font-size: 1.5rem; color: #888; cursor: pointer; transition: color 0.2s; }
        .cookie-close:hover { color: #fff; }
        
        .btn-continue { background-color: #FFC107; color: #333; border: none; padding: 12px 25px; border-radius: 6px; font-weight: 700; cursor: pointer; float: right; margin-top: 10px; transition: background 0.2s; }
        .btn-continue:hover { background-color: #ffca28; }

        .register-form .form-group { margin-bottom: 15px; }
        .register-form .form-control { background-color: #3a3a3a; border-color: #555; }
        .register-form .form-control:focus { background-color: #444; border-color: #FFC107; }

        .captcha-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #3a3a3a;
            border: 1px solid #555;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }
        .captcha-code {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            letter-spacing: 5px;
            text-decoration: line-through;
            user-select: none; 
            background: linear-gradient(45deg, #2c2c2c, #444);
            padding: 5px 15px;
            border-radius: 4px;
        }
        .captcha-refresh {
            color: #FFC107;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            transition: transform 0.2s;
        }
        .captcha-refresh:hover { transform: rotate(180deg); }
        .captcha-input { width: 100%; margin-top: 5px; }

        .register-form input[list].form-control::-webkit-calendar-picker-indicator {
            filter: invert(1);
            opacity: 0.6;
            cursor: pointer;
        }
        .register-form input[list].form-control::-webkit-calendar-picker-indicator:hover {
            opacity: 1;
        }

        .language-list { display: flex; flex-direction: column; gap: 10px; }
        .language-option { padding: 15px; background: #333; border: 1px solid #555; border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s; }
        .language-option:hover { background: #444; border-color: #FFC107; }
        .language-option.selected { background: rgba(255, 193, 7, 0.1); border-color: #FFC107; color: #FFC107; font-weight: 600; }
        .check-icon { color: #FFC107; font-size: 1.2rem; }

        .migration-card {
            position: absolute;
            top: 40px;
            right: 40px;
            width: 550px;
            max-width: 90%;
            background: rgba(30, 30, 30, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 5px solid #FFC107;
            padding: 25px;
            border-radius: 8px;
            color: #fff;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            z-index: 100;
            opacity: 0;
            transform: translateY(-20px);
            animation: slideInFade 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .migration-card:hover {
            transform: translateY(0) scale(1.02);
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
            border-color: rgba(255, 193, 7, 0.3);
        }

        .migration-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 12px;
        }

        .migration-icon {
            color: #FFC107;
            font-size: 1.5rem;
            animation: pulseIcon 2s infinite;
        }

        .migration-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .migration-desc {
            font-size: 0.95rem;
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 20px;
            font-weight: 300;
            text-align: justify;
        }

        .migration-btn {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, #FFC107 0%, #FFD54F 100%);
            color: #222;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.2);
        }

        .migration-btn:hover {
            padding-right: 25px;
            background: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
        }

        .migration-btn i {
            transition: transform 0.3s;
        }

        .migration-btn:hover i {
            transform: translateX(5px);
        }

        @keyframes slideInFade {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulseIcon {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }

        @media (max-width: 1366px), (max-height: 800px) {
            .login-left { padding: 20px 30px; }
            .brand-header { margin-bottom: 20px; gap: 15px; }
            .brand-title { font-size: 2.2rem; }
            .brand-subtitle { font-size: 0.9rem; }
            .login-logo { height: 60px; }
            .brand-text { min-height: 55px; padding-left: 15px; }
            .welcome-text { margin-bottom: 20px; }
            .welcome-text h2 { font-size: 1.5rem; }
            .form-control { padding: 12px 15px; font-size: 0.9rem; }
            .login-btn { padding: 12px; font-size: 1rem; }
            .info-box { margin-top: 20px; padding: 12px; font-size: 0.8rem; }
            .footer-links { margin-top: 20px; }
        }

        @media (max-width: 1200px) {
            .login-left { width: 40%; }
            .login-right { width: 60%; }
        }

        @media (max-width: 900px) {
            .login-left { width: 50%; }
            .login-right { width: 50%; }
            .brand-title { font-size: 2rem; }
            .login-logo { height: 50px; }
        }

        @media (max-width: 768px) {
            .login-container { flex-direction: column; }
            .login-left { width: 100%; height: auto; min-height: 100vh; padding: 40px 30px; justify-content: center; overflow-y: visible; }
            .login-right { display: none; } 
            .login-form-wrapper { max-width: 400px; margin: 0; }
            .footer-links { margin-top: 30px; padding-bottom: 0; }
            .migration-card {
                top: 20px;
                right: 20px;
                left: 20px;
                width: auto;
            }
        }
    </style>
</head>
<body>

    <main class="login-container">
        <section class="login-left">
            <div class="login-form-wrapper">
                <div class="brand-header">
                    <img src="{{ url_for('static', filename='Logo_IFG-removebg-preview.png') }}" alt="Logo IFG" class="login-logo">
                    <div class="brand-text">
                        <div class="brand-title">AMS</div>
                        <div class="brand-subtitle">Audit Management System</div>
                    </div>
                </div>

                <div class="welcome-text">
                    <h2 data-i18n="welcome_title">Selamat Datang</h2>
                    <p data-i18n="welcome_desc">Silakan login untuk mengakses dashboard monitoring dan tindak lanjut audit.</p>
                </div>

                <form method="POST">
                    <div class="form-group">
                        <input type="text" id="username" name="username" class="form-control" placeholder="Username" data-i18n-placeholder="username_placeholder" required autocomplete="off">
                    </div>
                    
                    <div class="form-group">
                        <input type="password" id="password" name="password" class="form-control" placeholder="Password" data-i18n-placeholder="password_placeholder" required>
                    </div>

                    <button type="submit" class="login-btn" data-i18n="login_btn">LOG IN</button>
                    
                    <div class="action-links">
                        <a href="#" onclick="openRegisterModal(); return false;" class="create-account-link" data-i18n="create_account">Buat akun baru</a>
                        <a href="#" data-i18n="forgot_pass">Lupa password?</a>
                    </div>
                </form>

                <div class="info-box">
                    <strong data-i18n="first_time">Baru pertama kali di sini?</strong><br>
                    <span data-i18n="help_text_1">Jika Anda terkendala login atau belum memiliki akun, silakan menghubungi Administrator SKAI atau kirim email ke</span> <a href="mailto:helpdesk-skai@ifg.id">helpdesk-skai@ifg.id</a>.
                </div>
            
                <div class="footer-links">
                    <a href="#" id="language-link" onclick="openLanguageModal(); return false;">Bahasa Indonesia (id) &#9662;</a>
                    <span class="footer-separator">|</span>
                    <a href="#" onclick="openCookieModal(); return false;" data-i18n="cookies_notice_link">Pemberitahuan Cookie</a>
                </div>
            </div>
        </section>

        <aside class="login-right">
            <div class="building-outline"></div> 
            
            <div class="migration-card">
                <div class="migration-header">
                    <i class="fas fa-server migration-icon"></i>
                    <div class="migration-title">System Migration</div>
                </div>
                
                <div class="migration-desc">
                    Sistem ini akan dinonaktifkan untuk migrasi ke web baru, silakan kunjungi tautan di bawah untuk mengakses web dengan link terbaru.
                </div>

                <a href="http://typo.gcsi-consulting.id" class="migration-btn">
                    <span>Kunjungi typo.gcsi-consulting.id</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>

            <div class="hero-text">
                <h3 data-i18n="hero_title">Satuan Kerja Audit Internal</h3>
                <p data-i18n="hero_subtitle">Indonesia Financial Group</p>
            </div>
        </aside>
    </main>

    <div id="cookie-modal" class="modal-overlay">
        <div class="cookie-modal">
            <span class="cookie-close" onclick="closeCookieModal()">&times;</span>
            <div class="cookie-header">
                <h3 data-i18n="cookies_title">Pemberitahuan Cookie</h3>
            </div>
            <div class="cookie-content">
                <p data-i18n="cookie_p1">Dua cookie digunakan di situs ini:</p>
                <p><span data-i18n="cookie_p2_1">Yang penting adalah cookie sesi, biasanya disebut</span> <strong>AMS_Session</strong>. <span data-i18n="cookie_p2_2">Anda harus mengizinkan cookie ini di browser Anda untuk memberikan kontinuitas dan tetap masuk saat menjelajahi situs. Saat Anda keluar atau menutup browser, cookie ini dihancurkan (di browser Anda dan di server).</span></p>
                <p><span data-i18n="cookie_p3_1">Cookie lainnya murni untuk kenyamanan, biasanya disebut</span> <strong>AMS_ID</strong> <span data-i18n="cookie_p3_2">atau serupa. Ini hanya mengingat nama pengguna Anda di browser. Ini berarti ketika Anda kembali ke situs ini, bidang nama pengguna di halaman login sudah terisi untuk Anda. Aman untuk menolak cookie ini - Anda hanya perlu mengetik ulang nama pengguna Anda setiap kali masuk.</span></p>
            </div>
            <button class="btn-continue" onclick="closeCookieModal()" data-i18n="continue_btn">Lanjutkan</button>
        </div>
    </div>

    <div id="language-modal" class="modal-overlay">
        <div class="cookie-modal" style="width: 450px;">
            <span class="cookie-close" onclick="closeLanguageModal()">&times;</span>
            <div class="cookie-header">
                <h3 data-i18n="select_language">Pilih Bahasa</h3>
            </div>
            <div class="language-list">
                <div id="lang-id" class="language-option selected" onclick="selectLanguage('Bahasa Indonesia (id)', 'id')">
                    <span>Bahasa Indonesia (id)</span>
                    <span class="check-icon">✓</span>
                </div>
                <div id="lang-en" class="language-option" onclick="selectLanguage('English (en)', 'en')">
                    <span>English (en)</span>
                    <span class="check-icon" style="display: none;">✓</span>
                </div>
            </div>
        </div>
    </div>

    <div id="register-modal" class="modal-overlay">
        <div class="register-modal">
            <span class="cookie-close" onclick="closeRegisterModal()">&times;</span>
            <div class="register-header">
                <h3>Buat Akun Baru</h3>
            </div>
            <form action="{{ url_for('register') }}" method="POST" class="register-form" onsubmit="return validateRegisterForm()">
                <div class="form-group">
                    <input type="text" id="reg_fullname" name="fullname" class="form-control" placeholder="Nama Lengkap" required autocomplete="off">
                </div>

                <div class="form-group">
                    <input type="text" id="reg_username" name="username" class="form-control" placeholder="Username" required autocomplete="off">
                </div>
                
                <div class="form-group">
                    <input type="text" name="label" id="reg_label" class="form-control" list="unit-options" placeholder="Pilih atau Ketik Divisi / Unit" required autocomplete="off">
                    <datalist id="unit-options">
                        <option value="Audit">
                        <option value="Advisory">
                        <option value="CoE">
                    </datalist>
                </div>

                <div class="form-group">
                    <input type="password" id="reg_password" name="password" class="form-control" placeholder="Password" required>
                </div>

                <div class="form-group">
                    <input type="password" id="reg_confirm_password" name="confirm_password" class="form-control" placeholder="Konfirmasi Password" required>
                </div>

                <div class="form-group">
                    <div class="captcha-container">
                        <span id="captcha-code" class="captcha-code"></span>
                        <i class="fas fa-sync-alt captcha-refresh" onclick="generateCaptcha()" title="Refresh Captcha"></i>
                    </div>
                    <input type="text" id="captcha-input" class="form-control captcha-input" placeholder="Masukkan kode captcha di atas" required autocomplete="off">
                    <small id="captcha-error" style="color: #FF5252; display: none; margin-top: 5px;">Kode Captcha salah!</small>
                </div>

                <button type="submit" class="login-btn">DAFTAR SEKARANG</button>
            </form>
        </div>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        Swal.fire({
                            icon: '{{ category }}' === 'success' ? 'success' : 'error',
                            title: '{{ category }}' === 'success' ? 'Berhasil' : 'Gagal',
                            text: '{{ message }}',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#FFC107',
                            background: '#333',
                            color: '#fff'
                        });
                    });
                </script>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <script>
        const translations = {
            id: {
                welcome_title: "Selamat Datang",
                welcome_desc: "Silakan login untuk mengakses dashboard monitoring dan tindak lanjut audit.",
                username_placeholder: "Username",
                password_placeholder: "Password",
                login_btn: "LOG IN",
                forgot_pass: "Lupa password?",
                create_account: "Buat akun baru",
                first_time: "Baru pertama kali di sini?",
                help_text_1: "Jika Anda terkendala login atau belum memiliki akun, silakan menghubungi Administrator SKAI atau kirim email ke",
                hero_title: "Satuan Kerja Audit Internal",
                hero_subtitle: "Indonesia Financial Group",
                cookies_notice_link: "Pemberitahuan Cookie",
                cookies_title: "Pemberitahuan Cookie",
                cookie_p1: "Dua cookie digunakan di situs ini:",
                cookie_p2_1: "Yang penting adalah cookie sesi, biasanya disebut",
                cookie_p2_2: "Anda harus mengizinkan cookie ini di browser Anda untuk memberikan kontinuitas dan tetap masuk saat menjelajahi situs. Saat Anda keluar atau menutup browser, cookie ini dihancurkan (di browser Anda dan di server).",
                cookie_p3_1: "Cookie lainnya murni untuk kenyamanan, biasanya disebut",
                cookie_p3_2: "atau serupa. Ini hanya mengingat nama pengguna Anda di browser. Ini berarti ketika Anda kembali ke situs ini, bidang nama pengguna di halaman login sudah terisi untuk Anda. Aman untuk menolak cookie ini - Anda hanya perlu mengetik ulang nama pengguna Anda setiap kali masuk.",
                continue_btn: "Lanjutkan",
                select_language: "Pilih Bahasa"
            },
            en: {
                welcome_title: "Welcome",
                welcome_desc: "Please login to access the monitoring dashboard and audit follow-up.",
                username_placeholder: "Username",
                password_placeholder: "Password",
                login_btn: "LOG IN",
                forgot_pass: "Forgot password?",
                create_account: "Create new account",
                first_time: "First time here?",
                help_text_1: "If you have trouble logging in or do not have an account, please contact the SKAI Administrator or send an email to",
                hero_title: "Satuan Kerja Audit Internal",
                hero_subtitle: "Indonesia Financial Group",
                cookies_notice_link: "Cookies Notice",
                cookies_title: "Cookies Notice",
                cookie_p1: "Two cookies are used on this site:",
                cookie_p2_1: "The essential one is the session cookie, usually called",
                cookie_p2_2: "You must allow this cookie in your browser to provide continuity and to remain logged in when browsing the site. When you log out or close the browser, this cookie is destroyed (in your browser and on the server).",
                cookie_p3_1: "The other cookie is purely for convenience, usually called",
                cookie_p3_2: "or similar. It just remembers your username in the browser. This means that when you return to this site, the username field on the login page is already filled in for you. It is safe to refuse this cookie - you will just have to retype your username each time you log in.",
                continue_btn: "Continue",
                select_language: "Select Language"
            }
        };

        let currentCaptcha = "";

        function generateCaptcha() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            currentCaptcha = captcha;
            document.getElementById('captcha-code').innerText = captcha;
            document.getElementById('captcha-input').value = '';
            document.getElementById('captcha-error').style.display = 'none';
        }

        function validateRegisterForm() {
            const userCaptcha = document.getElementById('captcha-input').value;
            const password = document.getElementById('reg_password').value;
            const confirmPassword = document.getElementById('reg_confirm_password').value;
            if (password !== confirmPassword) {
                Swal.fire({
                    icon: 'error',
                    title: 'Validasi Gagal',
                    text: 'Password dan Konfirmasi Password tidak cocok!',
                    confirmButtonColor: '#FFC107',
                    background: '#333',
                    color: '#fff'
                });
                return false;
            }

            if (userCaptcha !== currentCaptcha) {
                document.getElementById('captcha-error').style.display = 'block';
                const input = document.getElementById('captcha-input');
                input.style.borderColor = '#FF5252';
                setTimeout(() => { input.style.borderColor = '#555'; }, 2000);
                return false;
            }
            
            return true;
        }

        function openCookieModal() {
            document.getElementById('cookie-modal').classList.add('active');
        }
        function closeCookieModal() {
            document.getElementById('cookie-modal').classList.remove('active');
        }

        function openLanguageModal() {
            document.getElementById('language-modal').classList.add('active');
        }
        function closeLanguageModal() {
            document.getElementById('language-modal').classList.remove('active');
        }

        function openRegisterModal() {
            generateCaptcha(); 
            document.getElementById('register-modal').classList.add('active');
        }
        function closeRegisterModal() {
            document.getElementById('register-modal').classList.remove('active');
        }

        function selectLanguage(text, code) {
            document.getElementById('language-link').innerHTML = text + ' &#9662;';
            document.querySelectorAll('.language-option').forEach(el => {
                el.classList.remove('selected');
                el.querySelector('.check-icon').style.display = 'none';
            });
            
            const selectedEl = document.getElementById('lang-' + code);
            selectedEl.classList.add('selected');
            selectedEl.querySelector('.check-icon').style.display = 'block';
            const content = translations[code];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (content[key]) {
                    el.innerText = content[key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (content[key]) {
                    el.placeholder = content[key];
                }
            });

            closeLanguageModal();
        }

        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>

</body>
</html>