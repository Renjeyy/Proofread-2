<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Audit Management System</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon-32x32.png') }}" type="image/png"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            overflow: hidden; /* Mencegah scroll pada body utama */
            background-color: #f5f5f5;
        }

        .login-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .login-left {
            width: 35%;
            background-color: #2c2c2c;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Tetap berusaha center */
            align-items: center;
            /* REVISI: Padding dibuat responsif terhadap tinggi layar */
            padding: 4vh 40px; 
            color: #fff;
            position: relative;
            box-shadow: 10px 0 30px rgba(0,0,0,0.2);
            z-index: 10;
            /* REVISI: Mengizinkan scroll vertikal jika konten terlalu tinggi saat zoom 100% */
            overflow-y: auto; 
            height: 100vh;
        }

        /* Scrollbar custom agar rapi */
        .login-left::-webkit-scrollbar { width: 6px; }
        .login-left::-webkit-scrollbar-track { background: #2c2c2c; }
        .login-left::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .login-left::-webkit-scrollbar-thumb:hover { background: #FFC107; }

        .login-right {
            width: 65%;
            background-image: url("{{ url_for('static', filename='6e4e7b60-a9c1-4069-a82f-8bc252b8ed0c.webp') }}"); 
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .login-right::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(20, 20, 20, 0.4) 100%);
        }

        .building-outline {
            position: absolute;
            bottom: 0;
            right: 50px;
            width: 70%;
            height: 80%;
            background-image: url("{{ url_for('static', filename='building_outline.png') }}");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom right;
            opacity: 0.9;
            z-index: 1;
        }
        .brand-header {
            margin-bottom: 4vh; 
            display: flex;
            align-items: center;
            gap: 20px; 
            width: 100%;
            max-width: 500px; 
            justify-content: center;
        }

        .login-logo {
            height: clamp(60px, 8vh, 90px); 
            width: auto;
            text-align: center;
        }
        
        .brand-text {
            border-left: 4px solid #666; 
            padding-left: 20px; 
            min-height: clamp(60px, 8vh, 85px); 
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
        }

        /* REVISI: Font size responsif */
        .brand-title {
            font-size: clamp(2.5rem, 4vw, 3.5rem); 
            font-weight: 800;
            color: #FFC107;
            line-height: 0.9; 
            letter-spacing: 1px;
        }
        
        .brand-subtitle {
            font-size: clamp(0.9rem, 1vw, 1.1rem); 
            color: #ddd;
            margin-top: 5px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .login-form-wrapper {
            width: 100%;
            max-width: 450px; 
            /* REVISI: Margin otomatis agar ada jarak aman saat di-scroll */
            margin: auto 0; 
        }

        .welcome-text {
            margin-bottom: 3vh; /* Jarak fleksibel */
            text-align: center;
        }

        .welcome-text h2 {
            font-size: clamp(1.5rem, 2.5vw, 2rem); 
            font-weight: 700;
            margin-bottom: 5px;
            color: #fff;
        }

        .welcome-text p {
            font-size: 0.95rem;
            color: #bbb;
            line-height: 1.4;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            width: 100%;
            padding: 15px 20px; 
            background-color: #444;
            border: 1px solid #555;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem; 
            outline: none;
            transition: all 0.3s;
        }

        .form-control::placeholder { color: #888; }

        .form-control:focus {
            background-color: #505050;
            border-color: #FFC107;
            box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 14px; 
            background-color: #FFC107;
            color: #333;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(255, 193, 7, 0.2);
            text-transform: uppercase;
        }

        .login-btn:hover {
            background-color: #ffca28;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 193, 7, 0.3);
        }
        
        .forgot-password {
            text-align: right;
            margin-top: 10px;
        }

        .forgot-password a {
            color: #aaa;
            font-size: 0.85rem;
            text-decoration: none;
            transition: color 0.2s;
        }

        .forgot-password a:hover {
            color: #FFC107;
            text-decoration: underline;
        }

        .info-box {
            margin-top: 3vh;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #FFC107;
            font-size: 0.85rem;
            color: #ccc;
            line-height: 1.5;
        }
        
        .info-box strong { color: #FFC107; font-size: 0.9rem; }
        .info-box a { color: #FFC107; text-decoration: none; font-weight: 600; }

        .footer-links {
            margin-top: 4vh;
            padding-bottom: 2vh;
            font-size: 0.8rem;
            color: #888;
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 450px;
            justify-content: center;
        }
        
        .footer-links a {
            color: #FFC107; 
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .footer-links a:hover { color: #fff; }
        .footer-separator { color: #666; }

        .hero-text {
            position: absolute;
            bottom: 60px;
            right: 60px;
            text-align: right;
            color: white;
            z-index: 2;
        }
        
        .hero-text h3 {
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            margin-bottom: 5px;
        }

        .hero-text p {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }

        /* Modal Styles (Tetap sama) */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); z-index: 2000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        
        .cookie-modal {
            background: #2c2c2c; 
            color: #fff;
            padding: 35px;
            border-radius: 12px;
            width: 600px;
            max-width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid #444;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            position: relative;
        }
        .modal-overlay.active .cookie-modal { transform: translateY(0); }
        .cookie-header { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #444; padding-bottom: 15px; text-align: center; }
        .cookie-header h3 { font-size: 1.4rem; color: #FFC107; font-weight: 700; margin: 0; text-align: center;}
        .cookie-content p { font-size: 0.95rem; line-height: 1.6; color: #ccc; margin-bottom: 15px; text-align: justify; }
        .cookie-content strong { color: #fff; }
        .cookie-close { position: absolute; top: 20px; right: 20px; font-size: 1.5rem; color: #888; cursor: pointer; transition: color 0.2s; }
        .cookie-close:hover { color: #fff; }
        .btn-continue { background-color: #FFC107; color: #333; border: none; padding: 12px 25px; border-radius: 6px; font-weight: 700; cursor: pointer; float: right; margin-top: 10px; transition: background 0.2s; }
        .btn-continue:hover { background-color: #ffca28; }

        /* Language Modal Specifics */
        .language-list { display: flex; flex-direction: column; gap: 10px; }
        .language-option { padding: 15px; background: #333; border: 1px solid #555; border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s; }
        .language-option:hover { background: #444; border-color: #FFC107; }
        .language-option.selected { background: rgba(255, 193, 7, 0.1); border-color: #FFC107; color: #FFC107; font-weight: 600; }
        .check-icon { color: #FFC107; font-size: 1.2rem; }

        /* MEDIA QUERIES KHUSUS UNTUK TAMPILAN RAPI DI LAPTOP (ZOOM 100%) */
        @media (max-width: 1366px), (max-height: 800px) {
            .login-left { padding: 20px 30px; }
            .brand-header { margin-bottom: 20px; gap: 15px; }
            .brand-title { font-size: 2.2rem; }
            .brand-subtitle { font-size: 0.9rem; }
            .login-logo { height: 60px; }
            .brand-text { min-height: 55px; padding-left: 15px; }
            .welcome-text { margin-bottom: 20px; }
            .welcome-text h2 { font-size: 1.5rem; }
            .form-control { padding: 12px 15px; font-size: 0.9rem; }
            .login-btn { padding: 12px; font-size: 1rem; }
            .info-box { margin-top: 20px; padding: 12px; font-size: 0.8rem; }
            .footer-links { margin-top: 20px; }
        }

        @media (max-width: 1200px) {
            .login-left { width: 40%; }
            .login-right { width: 60%; }
        }

        @media (max-width: 900px) {
            .login-left { width: 50%; }
            .login-right { width: 50%; }
            .brand-title { font-size: 2rem; }
            .login-logo { height: 50px; }
        }

        @media (max-width: 768px) {
            .login-container { flex-direction: column; }
            .login-left { width: 100%; height: auto; min-height: 100vh; padding: 40px 30px; justify-content: center; overflow-y: visible; }
            .login-right { display: none; } 
            .login-form-wrapper { max-width: 400px; margin: 0; }
            .footer-links { margin-top: 30px; padding-bottom: 0; }
        }
    </style>
</head>
<body>

    <main class="login-container">
        <section class="login-left">
            <div class="login-form-wrapper">
                <div class="brand-header">
                    <img src="{{ url_for('static', filename='Logo_IFG-removebg-preview.png') }}" alt="Logo IFG" class="login-logo">
                    <div class="brand-text">
                        <div class="brand-title">AMS</div>
                        <div class="brand-subtitle">Audit Management System</div>
                    </div>
                </div>

                <div class="welcome-text">
                    <h2 data-i18n="welcome_title">Selamat Datang</h2>
                    <p data-i18n="welcome_desc">Silakan login untuk mengakses dashboard monitoring dan tindak lanjut audit.</p>
                </div>

                <form method="POST">
                    <div class="form-group">
                        <input type="text" id="username" name="username" class="form-control" placeholder="Username" data-i18n-placeholder="username_placeholder" required autocomplete="off">
                    </div>
                    
                    <div class="form-group">
                        <input type="password" id="password" name="password" class="form-control" placeholder="Password" data-i18n-placeholder="password_placeholder" required>
                    </div>

                    <button type="submit" class="login-btn" data-i18n="login_btn">LOG IN</button>
                    
                    <div class="forgot-password">
                        <a href="#" data-i18n="forgot_pass">Lupa password?</a>
                    </div>
                </form>

                <div class="info-box">
                    <strong data-i18n="first_time">Baru pertama kali di sini?</strong><br>
                    <span data-i18n="help_text_1">Jika Anda terkendala login atau belum memiliki akun, silakan menghubungi Administrator SKAI atau kirim email ke</span> <a href="mailto:helpdesk-skai@ifg.id">helpdesk-skai@ifg.id</a>.
                </div>
            
                <div class="footer-links">
                    <a href="#" id="language-link" onclick="openLanguageModal(); return false;">Bahasa Indonesia (id) &#9662;</a>
                    <span class="footer-separator">|</span>
                    <a href="#" onclick="openCookieModal(); return false;" data-i18n="cookies_notice_link">Pemberitahuan Cookie</a>
                </div>
            </div>
        </section>

        <aside class="login-right">
            <div class="building-outline"></div> 
            
            <div class="hero-text">
                <h3 data-i18n="hero_title">Satuan Kerja Audit Internal</h3>
                <p data-i18n="hero_subtitle">Indonesia Financial Group</p>
            </div>
        </aside>
    </main>

    <div id="cookie-modal" class="modal-overlay">
        <div class="cookie-modal">
            <span class="cookie-close" onclick="closeCookieModal()">&times;</span>
            <div class="cookie-header">
                <h3 data-i18n="cookies_title">Pemberitahuan Cookie</h3>
            </div>
            <div class="cookie-content">
                <p data-i18n="cookie_p1">Dua cookie digunakan di situs ini:</p>
                <p><span data-i18n="cookie_p2_1">Yang penting adalah cookie sesi, biasanya disebut</span> <strong>AMS_Session</strong>. <span data-i18n="cookie_p2_2">Anda harus mengizinkan cookie ini di browser Anda untuk memberikan kontinuitas dan tetap masuk saat menjelajahi situs. Saat Anda keluar atau menutup browser, cookie ini dihancurkan (di browser Anda dan di server).</span></p>
                <p><span data-i18n="cookie_p3_1">Cookie lainnya murni untuk kenyamanan, biasanya disebut</span> <strong>AMS_ID</strong> <span data-i18n="cookie_p3_2">atau serupa. Ini hanya mengingat nama pengguna Anda di browser. Ini berarti ketika Anda kembali ke situs ini, bidang nama pengguna di halaman login sudah terisi untuk Anda. Aman untuk menolak cookie ini - Anda hanya perlu mengetik ulang nama pengguna Anda setiap kali masuk.</span></p>
            </div>
            <button class="btn-continue" onclick="closeCookieModal()" data-i18n="continue_btn">Lanjutkan</button>
        </div>
    </div>

    <div id="language-modal" class="modal-overlay">
        <div class="cookie-modal" style="width: 450px;">
            <span class="cookie-close" onclick="closeLanguageModal()">&times;</span>
            <div class="cookie-header">
                <h3 data-i18n="select_language">Pilih Bahasa</h3>
            </div>
            <div class="language-list">
                <div id="lang-id" class="language-option selected" onclick="selectLanguage('Bahasa Indonesia (id)', 'id')">
                    <span>Bahasa Indonesia (id)</span>
                    <span class="check-icon">✓</span>
                </div>
                <div id="lang-en" class="language-option" onclick="selectLanguage('English (en)', 'en')">
                    <span>English (en)</span>
                    <span class="check-icon" style="display: none;">✓</span>
                </div>
            </div>
        </div>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        Swal.fire({
                            icon: 'error',
                            title: 'Login Gagal',
                            text: '{{ message }}',
                            confirmButtonText: 'Coba Lagi',
                            confirmButtonColor: '#FFC107',
                            background: '#333',
                            color: '#fff'
                        });
                    });
                </script>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <script>
        // Dictionary Bahasa
        const translations = {
            id: {
                welcome_title: "Selamat Datang",
                welcome_desc: "Silakan login untuk mengakses dashboard monitoring dan tindak lanjut audit.",
                username_placeholder: "Username",
                password_placeholder: "Password",
                login_btn: "LOG IN",
                forgot_pass: "Lupa password?",
                first_time: "Baru pertama kali di sini?",
                help_text_1: "Jika Anda terkendala login atau belum memiliki akun, silakan menghubungi Administrator SKAI atau kirim email ke",
                hero_title: "Satuan Kerja Audit Internal",
                hero_subtitle: "Indonesia Financial Group",
                cookies_notice_link: "Pemberitahuan Cookie",
                cookies_title: "Pemberitahuan Cookie",
                cookie_p1: "Dua cookie digunakan di situs ini:",
                cookie_p2_1: "Yang penting adalah cookie sesi, biasanya disebut",
                cookie_p2_2: "Anda harus mengizinkan cookie ini di browser Anda untuk memberikan kontinuitas dan tetap masuk saat menjelajahi situs. Saat Anda keluar atau menutup browser, cookie ini dihancurkan (di browser Anda dan di server).",
                cookie_p3_1: "Cookie lainnya murni untuk kenyamanan, biasanya disebut",
                cookie_p3_2: "atau serupa. Ini hanya mengingat nama pengguna Anda di browser. Ini berarti ketika Anda kembali ke situs ini, bidang nama pengguna di halaman login sudah terisi untuk Anda. Aman untuk menolak cookie ini - Anda hanya perlu mengetik ulang nama pengguna Anda setiap kali masuk.",
                continue_btn: "Lanjutkan",
                select_language: "Pilih Bahasa"
            },
            en: {
                welcome_title: "Welcome",
                welcome_desc: "Please login to access the monitoring dashboard and audit follow-up.",
                username_placeholder: "Username",
                password_placeholder: "Password",
                login_btn: "LOG IN",
                forgot_pass: "Forgot password?",
                first_time: "First time here?",
                help_text_1: "If you have trouble logging in or do not have an account, please contact the SKAI Administrator or send an email to",
                hero_title: "Internal Audit Unit",
                hero_subtitle: "Indonesia Financial Group",
                cookies_notice_link: "Cookies Notice",
                cookies_title: "Cookies Notice",
                cookie_p1: "Two cookies are used on this site:",
                cookie_p2_1: "The essential one is the session cookie, usually called",
                cookie_p2_2: "You must allow this cookie in your browser to provide continuity and to remain logged in when browsing the site. When you log out or close the browser, this cookie is destroyed (in your browser and on the server).",
                cookie_p3_1: "The other cookie is purely for convenience, usually called",
                cookie_p3_2: "or similar. It just remembers your username in the browser. This means that when you return to this site, the username field on the login page is already filled in for you. It is safe to refuse this cookie - you will just have to retype your username each time you log in.",
                continue_btn: "Continue",
                select_language: "Select Language"
            }
        };

        function openCookieModal() {
            document.getElementById('cookie-modal').classList.add('active');
        }
        function closeCookieModal() {
            document.getElementById('cookie-modal').classList.remove('active');
        }

        function openLanguageModal() {
            document.getElementById('language-modal').classList.add('active');
        }
        function closeLanguageModal() {
            document.getElementById('language-modal').classList.remove('active');
        }

        function selectLanguage(text, code) {
            // Update link text
            document.getElementById('language-link').innerHTML = text + ' &#9662;';
            
            // Update modal visual selection
            document.querySelectorAll('.language-option').forEach(el => {
                el.classList.remove('selected');
                el.querySelector('.check-icon').style.display = 'none';
            });
            
            const selectedEl = document.getElementById('lang-' + code);
            selectedEl.classList.add('selected');
            selectedEl.querySelector('.check-icon').style.display = 'block';

            // Apply Translations
            const content = translations[code];
            
            // Update Text Content
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (content[key]) {
                    el.innerText = content[key];
                }
            });

            // Update Placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (content[key]) {
                    el.placeholder = content[key];
                }
            });

            closeLanguageModal();
        }

        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>

</body>
</html>